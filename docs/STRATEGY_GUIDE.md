# 策略管理使用指南

## 概述

本系统提供了一个完整的策略管理框架，支持策略创建、配置、启动、停止、回测和监控功能。基于 vn.py 的 CTA 策略框架设计，可以轻松扩展各种交易策略。

## 功能特点

### 1. 策略管理
- **策略创建**：支持多种策略类型（CTA、套利、高频、自定义）
- **策略配置**：通过图形界面配置策略参数
- **策略启动/停止**：一键启动/停止策略
- **策略监控**：实时查看策略运行状态和绩效

### 2. 回测系统
- **历史回测**：支持基于历史数据的策略回测
- **绩效分析**：自动计算胜率、盈亏比、最大回撤等指标
- **可视化结果**：提供详细的回测报告

### 3. 策略模板
- **预设模板**：包含双均线、RSI、布林带、MACD等经典策略
- **模板管理**：支持添加、编辑、删除策略模板
- **参数继承**：可以快速基于模板创建新策略

## 快速开始

### 1. 访问策略管理界面
点击主界面上的 "策略管理" 按钮，打开策略管理窗口。

### 2. 创建策略
1. 点击 "添加策略" 按钮
2. 填写策略信息：
   - 策略名称：给策略起个名字
   - 策略类型：选择策略类型
   - 交易品种：输入要交易的合约代码，多个用逗号分隔
   - 策略参数：JSON格式的参数配置
3. 点击 "确定" 创建策略

### 3. 启动策略
1. 在策略列表中选择要启动的策略
2. 点击 "启动策略" 按钮
3. 确认策略已启动（状态变为"running"）

### 4. 回测策略
1. 选择要回测的策略
2. 点击 "回测策略" 按钮
3. 设置回测时间段
4. 查看回测结果

## 策略模板说明

### 双均线策略
**原理**：当短期均线上穿长期均线时买入，下穿时卖出
**参数**：
- fast_ma_period: 短期均线周期（默认5）
- slow_ma_period: 长期均线周期（默认20）
- trade_volume: 每次交易手数（默认1）
- stop_loss: 止损点数（默认10）
- take_profit: 止盈点数（默认20）

### RSI策略
**原理**：RSI低于超卖线时买入，高于超买线时卖出
**参数**：
- rsi_period: RSI计算周期（默认14）
- rsi_overbought: 超买阈值（默认70）
- rsi_oversold: 超卖阈值（默认30）
- trade_volume: 每次交易手数（默认1）

### 布林带策略
**原理**：价格突破上轨时买入，跌破下轨时卖出
**参数**：
- bb_period: 布林带周期（默认20）
- bb_std: 标准差倍数（默认2）
- trade_volume: 每次交易手数（默认1）

### MACD策略
**原理**：MACD金叉时买入，死叉时卖出
**参数**：
- macd_fast: 快速EMA周期（默认12）
- macd_slow: 慢速EMA周期（默认26）
- macd_signal: 信号线周期（默认9）

## 策略参数配置

### 基本参数
- **trade_volume**: 每次交易的手数
- **stop_loss**: 止损点数
- **take_profit**: 止盈点数

### 技术指标参数
根据不同策略类型，可以配置相应的技术指标参数。

### 示例配置
```json
{
  "trade_volume": 1,
  "stop_loss": 10,
  "take_profit": 20,
  "ma_period": 20,
  "rsi_period": 14,
  "rsi_overbought": 70,
  "rsi_oversold": 30
}
```

## 策略监控

### 实时状态
- **策略ID**: 唯一标识符
- **策略名称**: 用户定义的名称
- **策略类型**: CTA/套利/高频/自定义
- **运行状态**: running/stopped
- **交易品种**: 策略监控的合约
- **总盈利**: 策略累计盈利

### 绩效指标
- **总交易次数**: 策略执行的交易总数
- **胜率**: 盈利交易占总交易的百分比
- **总盈利**: 策略累计盈利金额
- **最大回撤**: 策略最大亏损幅度

## 高级功能

### 自定义策略
可以通过继承 `StrategyEngine` 类来创建自定义策略：

1. 创建新的策略类
2. 实现交易逻辑
3. 注册到策略引擎
4. 通过界面配置参数

### 数据管理
- **历史数据存储**: 自动保存回测数据
- **策略配置文件**: JSON格式，易于修改
- **日志记录**: 详细记录策略运行日志

## 注意事项

1. **风险控制**: 始终设置合理的止损和仓位控制
2. **参数优化**: 建议先进行回测再实盘运行
3. **网络连接**: 确保稳定的网络连接，避免策略中断
4. **资金风险**: 策略交易有风险，请谨慎使用

## 故障排除

### 常见问题
1. **策略无法启动**: 检查参数配置是否正确
2. **回测失败**: 确认历史数据是否完整
3. **显示异常**: 尝试刷新策略列表

### 技术支持
查看系统日志获取详细错误信息，或联系技术支持。