# 新UI系统测试用例文档
## 基于vn.py设计风格的界面测试指南

### 🎯 测试目标
验证全新的UI系统是否符合vn.py设计规范，用户体验流畅，功能模块完整

---

## 📋 界面层级测试清单

### 🚪 Phase 1: 登录系统测试

#### TC-LOGIN-01: 新登录对话框界面测试
**测试目的**: 验证新登录对话框的视觉效果和布局
**测试步骤**:
1. 运行新登录对话框: `python ui/new_login_dialog.py`
2. 检查界面元素是否正确显示
3. 验证窗口居中显示

**预期结果**:
- [ ] 窗口标题显示为"交易系统登录"
- [ ] 顶部蓝色标题栏包含"期货交易系统"和"CTP交易终端"字样
- [ ] 服务器配置、账户信息分组清晰
- [ ] 所有输入框有占位符提示
- [ ] 按钮样式符合vn.py蓝色主题

#### TC-LOGIN-02: 服务器配置功能测试
**测试目的**: 验证服务器配置弹窗功能
**测试步骤**:
1. 点击"服务器配置"按钮
2. 在弹窗中输入服务器地址
3. 点击"保存配置"

**预期结果**:
- [ ] 配置窗口正常弹出
- [ ] 输入框默认值正确显示
- [ ] 配置保存到本地文件
- [ ] 下次启动自动加载保存的配置

#### TC-LOGIN-03: 记住密码功能测试
**测试目的**: 验证记住密码和自动登录功能
**测试步骤**:
1. 输入账户信息
2. 勾选"记住密码"
3. 登录成功后重启程序

**预期结果**:
- [ ] 密码字段自动填充（加密存储）
- [ ] 自动登录选项生效
- [ ] 配置文件正确保存到用户目录

---

### 🏢 Phase 2: 主界面布局测试

#### TC-MAIN-01: 三栏布局验证
**测试目的**: 验证vn.py标准三栏布局
**测试步骤**:
1. 运行新主界面: `python ui/new_main_window.py`
2. 检查整体布局结构

**预期布局结构**:
```
┌─────────────────────────────────────────────────────┐
│ 菜单栏 (Menu Bar)                                   │
├─────────────────────────────────────────────────────┤
│ 工具栏 (Tool Bar)                                   │
├─────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────────────────┐ │
│ │   左侧导航栏    │ │        中央工作区           │ │
│ │                 │ │                             │ │
│ │ 📊 行情监控     │ │ 标签页1 | 标签页2 | ...     │ │
│ │ 📋 委托管理     │ │                             │ │
│ │ 💰 成交查询     │ │                             │ │
│ │ 📈 持仓管理     │ │                             │ │
│ │ 🏦 资金管理     │ │                             │ │
│ │ ⚙️ 策略管理     │ └─────────────────────────────┘ │
│ │ 🛡️ 风险管理     │                                 │
│ │ 📊 业绩分析     │                                 │ │
│ │ 📥 日志查看     │                                 │ │
└─────────────────────────────────────────────────────┘
```

#### TC-MAIN-02: 导航面板交互测试
**测试目的**: 验证左侧导航面板的交互逻辑
**测试步骤**:
1. 点击左侧导航按钮
2. 观察标签页的变化
3. 测试按钮的选中状态

**预期结果**:
- [ ] 点击导航按钮后对应标签页打开
- [ ] 当前选中按钮蓝色高亮显示
- [ ] 标签页支持关闭（右上角的×按钮）
- [ ] 支持Ctrl+Tab快捷键切换标签页

#### TC-MAIN-03: 工具栏状态显示测试
**测试目的**: 验证顶部工具栏的状态信息
**测试步骤**:
1. 成功登录后观察工具栏
2. 进行交易操作观察状态更新

**预期状态显示**:
- [ ] 连接状态显示为绿色"● 已连接"
- [ ] 账户信息正确显示资金账号
- [ ] 资金信息实时更新
- [ ] 时间显示每秒更新

#### TC-MAIN-04: 菜单栏功能测试
**测试目的**: 验证标准菜单栏功能
**测试步骤**:
1. 打开"文件"菜单
2. 打开"视图"菜单  
3. 打开"工具"菜单
4. 打开"帮助"菜单

**预期结果**:
- [ ] 文件菜单包含系统设置和退出选项
- [ ] 视图菜单包含各功能模块快捷方式
- [ ] 工具菜单包含策略、风险、业绩分析
- [ ] 帮助菜单包含关于信息

---

### 🎨 Phase 3: 样式一致性测试

#### TC-STYLE-01: 颜色主题验证
**测试目的**: 验证统一的vn.py颜色主题
**检查项目**:
- [ ] 主色调: #1890ff (蓝色) - 按钮、高亮元素
- [ ] 成功状态: #52c41a (绿色) - 盈利、成功连接
- [ ] 警告状态: #faad14 (黄色) - 风险提示
- [ ] 错误状态: #f5222d (红色) - 错误信息

#### TC-STYLE-02: 字体规范验证
**测试目的**: 验证统一的字体规范
**字体规范**:
- [ ] 主字体: Microsoft YaHei UI
- [ ] 标题: 14px 加粗
- [ ] 正文: 12px 常规
- [ ] 小字号: 10px 辅助信息

#### TC-STYLE-03: 间距规范验证
**测试目的**: 验证统一的间距规范
**间距标准**:
- [ ] 组件间距: 8px
- [ ] 内边距: 12px  
- [ ] 外边距: 16px

---

### 🔄 Phase 4: 交互逻辑测试

#### TC-INTERACT-01: 导航流程测试
**测试目的**: 验证完整的用户操作流程
**测试流程**:
1. 启动程序 → 登录窗口
2. 输入账户 → 连接成功 → 主界面
3. 点击"行情监控" → 打开行情标签页
4. 点击"委托管理" → 打开委托标签页
5. 关闭标签页 → 验证关闭功能

#### TC-INTERACT-02: 快捷键测试
**测试目的**: 验证快捷键功能
**快捷键测试**:
- [ ] Ctrl+Tab: 切换下一个标签页
- [ ] Ctrl+Shift+Tab: 切换到上一个标签页
- [ ] Ctrl+W: 关闭当前标签页
- [ ] F1-F12: 快速切换到对应功能模块

#### TC-INTERACT-03: 系统托盘功能测试
**测试目的**: 验证系统托盘功能
**测试步骤**:
1. 最小化到托盘
2. 双击托盘图标恢复窗口
3. 右键托盘图标查看菜单选项

**预期结果**:
- [ ] 最小化后托盘图标正常显示
- [ ] 双击托盘图标恢复窗口
- [ ] 托盘菜单包含显示/隐藏/退出选项

---

### 📊 Phase 5: 响应式设计测试

#### TC-RESPONSIVE-01: 窗口缩放测试
**测试目的**: 验证不同窗口尺寸的适配
**测试尺寸**:
- [ ] 最小窗口: 1024x768 - 所有元素正常显示
- [ ] 推荐窗口: 1920x1080 - 最佳显示效果  
- [ ] 最大窗口: 4K分辨率 - 字体和图标适当缩放

#### TC-RESPONSIVE-02: 组件自适应测试
**测试目的**: 验证组件的自适应能力
**测试内容**:
- [ ] 表格列宽自动调整
- [ ] 图表大小随窗口缩放
- [ ] 导航面板宽度固定，中央区域自适应

---

## 🧪 用户体验测试

### TC-UX-01: 操作流畅度测试
**测试场景**: 模拟真实交易场景
**测试步骤**:
1. 登录系统
2. 查看螺纹钢行情
3. 下单买入1手螺纹钢2410合约
4. 查看持仓变化
5. 查看成交记录

**用户体验评估**:
- [ ] 登录流程不超过3次点击
- [ ] 行情数据更新无延迟
- [ ] 下单操作步骤清晰明确
- [ ] 状态反馈及时准确

### TC-UX-02: 错误处理测试
**测试目的**: 验证友好的错误处理
**错误场景模拟**:
1. 输入错误的账户密码 - 预期: 清晰的错误提示
2. 网络连接中断 - 预期: 显示重连按钮
3. 服务器无响应 - 预期: 超时处理机制

---

## 🔧 测试工具和环境

### 环境准备
```bash
# 启动新UI测试
python ui/new_main_window.py

# 单独测试登录对话框
python ui/new_login_dialog.py
```

### 调试工具
```python
# 测试配置加载
from ui.new_login_dialog import NewLoginDialog
from pathlib import Path
import json

# 检查配置文件
def check_config():
    config_file = Path.home() / ".vnpy" / "login_config.json"
    if config_file.exists():
        with open(config_file, 'r', encoding='utf-8') as f:
            config = json.load(f)
            print("登录配置:", config)

check_config()
```

### 性能基准测试
- **启动时间**: < 3秒
- **标签页切换**: < 500ms  
- **窗口缩放**: < 100ms

---

## 📋 测试完成标准

### ✅ 验收检查表
- [ ] 所有界面元素正确显示
- [ ] 交互逻辑符合vn.py设计规范
- [ ] 颜色主题统一协调
- [ ] 响应式设计适配良好
- [ ] 用户体验流畅自然
- [ ] 错误处理友好有效

### 🎯 质量门控
1. **功能完整性**: 所有核心功能正常工作
2. **视觉一致性**: 设计风格统一规范
3. **交互流畅性**: 操作流程自然顺畅
4. **性能达标**: 响应时间符合要求

### 📊 测试执行记录表

| 测试项目 | 测试日期 | 测试环境 | 结果 | 备注 |
|----------|----------|----------|------|------|
| TC-LOGIN-01 | | Windows 10 | ☐/☐ | |
| TC-LOGIN-02 | | Windows 10 | ☐/☐ | |
| TC-LOGIN-03 | | Windows 10 | ☐/☐ | |
| TC-MAIN-01 | | Windows 10 | ☐/☐ | |
| TC-MAIN-02 | | Windows 10 | ☐/☐ | |
| TC-MAIN-03 | | Windows 10 | ☐/☐ | |
| TC-MAIN-04 | | Windows 10 | ☐/☐ | |
| TC-STYLE-01 | | Windows 10 | ☐/☐ | |
| TC-INTERACT-01 | | Windows 10 | ☐/☐ | |
| TC-UX-01 | | Windows 10 | ☐/☐ | |

### 🚀 下一步建议
1. 完成所有测试用例执行
2. 收集用户反馈进行微调
3. 准备切换到新UI系统
4. 考虑移动端适配方案